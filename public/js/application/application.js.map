{"version":3,"sources":["manage_stock.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"application.js","sourcesContent":["/**\n * manage_stock.js\n */\n $(document).ready(function() {\n\n \tsetResultToProductNameRow = '';\n    setResultToProductQuantityRow = '';\n    setResultToProductPriceRow = '';\n    setResultToProductTotal = '';\n\n    calculateGrandTotal();\n\n$('#save-product').click(function() {\n\tvar formData = $('#add-product-form').serialize();\n\t$.ajax({\n\t\ttype     : \"POST\",\n\t\turl      : $('meta[name=\"_home_url\"]').attr('content')+\"/stock\",\n\t\tdataType : 'json',\n        data     : formData,\n \t\tcache    : false,\n \t\tsuccess  : function(response) {\n\n \t\t\t\t\tif(response.status == 200) {\n                        swal(\"Added!\", \"Product added successfully.\", \"success\");\n\n                       $('#product-list-table').prepend('<tr><td>'+response.data.name\n                       \t+'</td><td>'+response.data.quantity\n                       \t+'</td><td>'+response.data.price_per_unit\n                       \t+'</td><td>'+response.data.created_at.date\n                       \t+'</td><td>'+response.data.total\n                       \t+'</td></tr>');\n                       calculateGrandTotal();\n                    }\n                    else if(response.status == 500) {\n                        swal ('Operation failed!', 'Please Try agin after some time', 'error');\n                    }\n                    else {\n\n                    \terrorString = '';\n                    \t$.each(response.error,function(key,value) {\n                    \t\terrorString += \"<li>\"+value+\"</li>\";\n                    \t});\n                        swal({\n                                title: \"Info!\",\n                                text: \"<div style='color:#ED5565;'><strong>One or more values are not correct.</strong><br/> <ul> \"+ errorString +\"</ul></div>\",\n                                type: \"warning\",\n                                html: true\n                        });\n                    }\n \t\t\t\t}\n \t\t\t});\n\n\treturn false;\n});\n\n/**\n * calculates the grand total of the column.\n *\n * @return float\n */\nfunction calculateGrandTotal() {\n\n\tvar total = 0;\n\t$(\"#product-list-table td:nth-child(5)\").each(function() {\n\n\t\tvar val = $(this).text().replace(\" \", \"\").replace(\",-\", \"\");\n        total += parseFloat(val);        \n\t});\n\n\t$('#grandTotal').text(total.toFixed(2));\n\n}\n\n/**\n * Handles the click event.\n *\n */\n $('#add-product-btn').click(function() {\n\n \t$('#add-product-form')[0].reset();\n\n  });\n\n /**\n  * Handling edit action\n  */\n  $('.edit-action').click(function(){\n\n  \tvar productId = $(this).attr('data-id');\n  \t$('#editProductId').prop('data-id', productId);\n\n  \t/* inititalizing the row objects */\n  \tsetResultToProductNameRow      = $(this).parents(\"tr\").children(\"td:nth-child(1)\");\n    setResultToProductQuantityRow = $(this).parents(\"tr\").children(\"td:nth-child(2)\");\n    setResultToProductPriceRow = $(this).parents(\"tr\").children(\"td:nth-child(3)\");\n    setResultToProductTotal = $(this).parents(\"tr\").children(\"td:nth-child(5)\")\n\n\n  \t/* initializing form fields */\n  \t$('#editName').val($(this).parents(\"tr\").children(\"td:nth-child(1)\").text());\n  \t$('#editQuantity').val($(this).parents(\"tr\").children(\"td:nth-child(2)\").text());\n  \t$('#editPrice').val($(this).parents(\"tr\").children(\"td:nth-child(3)\").text());\n\n  \t\n  });\n\n\n  /**\n   * \n   */\n   $('#edit-product').click(function() {\n\n   \tvar productId = $('#editProductId').prop('data-id');\n\n   \tvar formData = {\n   \t\t     'name' : $('#editName').val(),\n   \t\t     'quantity' : $('#editQuantity').val(),\n   \t\t     'price_per_unit' : $('#editPrice').val()\n   \t\t\t};\n\n   \t$.ajax({\n\t\ttype     : \"PUT\",\n\t\turl      : $('meta[name=\"_home_url\"]').attr('content')+\"/stock/\"+productId,\n\t\tdataType : 'json',\n        data     : formData,\n \t\tcache    : false,\n \t\tsuccess  : function(response) {\n\n \t\t\t\t\tif(response.status == 200) {\n                        \n                        swal(\"Added!\", \"Product added successfully.\", \"success\");\n\n                        /* updating the value of the rows dynamically */\n                        setResultToProductNameRow.text($('#editName').val());\n                        setResultToProductQuantityRow.text($('#editQuantity').val());\n                        setResultToProductPriceRow.text($('#editPrice').val());\n                        setResultToProductTotal.text( ( parseFloat($('#editQuantity').val()) * parseFloat($('#editPrice').val())));                       \n                        calculateGrandTotal();\n                    }\n                    else if(response.status == 500) {\n                        swal ('Operation failed!', 'Please Try agin after some time', 'error');\n                    }\n                    else {\n\n                    \terrorString = '';\n                    \t$.each(response.error,function(key,value) {\n                    \t\terrorString += \"<li>\"+value+\"</li>\";\n                    \t});\n                        swal({\n                                title: \"Info!\",\n                                text: \"<div style='color:#ED5565;'><strong>One or more values are not correct.</strong><br/> <ul> \"+ errorString +\"</ul></div>\",\n                                type: \"warning\",\n                                html: true\n                        });\n                    }\n \t\t\t\t}\n \t\t\t});\n\n\n\n   \treturn false;\n\n   });\n  \n\n });\n /* end of file manage_stock.js */\n"],"sourceRoot":"/source/"}